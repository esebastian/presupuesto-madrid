{% extends 'admin.html' %}

{% load static %}

{% block content %}
<section class="admin" role="region">
  <div class="admin-header section-header">
    <div class="container">
      <h2 class="page-title">{{ _('Población') }}</h2>
    </div>
  </div>

  <div class="admin-content">
    <div class="container">
      <div class="data-panel">

        <div class="panel">
          <div class="panel-content">
            <h3>1. Editar datos</h3>
            <p>El primer paso es editar o completar los datos de población en la tabla inferior. Los datos han de corresponderse con los de cifras oficiales de población total resultantes de la revisión del Padrón municipal a 1 de enero del año siguiente (que podemos encontrar <a href="http://www.ine.es/jaxiT3/Tabla.htm?t=2881&L=0" target="_blank">aquí</a>).</p>
          </div>
          <div id="handsontable-container"></div>
        </div>

        <div class="panel">
          <div class="panel-content">
            <h3>2. Guardar datos</h3>
            <p>Una vez editados, al pulsar el botón 'Guardar', los datos se actualizarán en el repositorio de GitHub, listos para el siguiente paso.</p>
            <form class="form-inline" id="data-save" action="" method="get">
              <button type="submit" class="btn btn-default btn-primary" >{{ _('Guardar') }}</button>
            </form>
            <div id="data-save-output" class="data-output">
              <div class="loading"><img src="/static/assets/loader.png"> Guardando datos</div>
              <div class="output"></div>
            </div>
          </div>
        </div>

        <div class="panel">
          <div class="panel-content">
            <h3>3. Cargar datos</h3>
            <p>Finalmente, podemos cargar en el servidor los datos existente en el repositorio de GitHub, haciéndolos visibles al exterior, tanto en español como en inglés. El proceso de carga tarda solamente unos instantes.</p>
            <form class="form-inline" id="data-load">
              <button type="submit" class="btn btn-default btn-primary" >{{ _('Cargar') }}</button>
            </form>
            <div id="data-load-output" class="data-output">
              <div class="loading"><img src="/static/assets/loader.png"> Cargando datos</div>
              <div class="output"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}

{% block extra_javascript %}
<script src="{% static 'javascripts/admin/csv_edit.js' %}"></script>
<script src="{% static 'javascripts/admin/population.js' %}"></script>
{% endblock %}
