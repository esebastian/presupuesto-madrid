{% extends 'admin.html' %}

{% load static %}

{% block content %}
<section class="admin" role="region">
  <div class="admin-header section-header">
    <div class="container">
      <h2 class="page-title">{{ _('Inflación') }}</h2>
    </div>
  </div>

  <div class="admin-content">
    <div class="container">
      <div class="data-panel">

        <div class="panel">
          <div class="panel-content">
            <h3>1. Editar datos</h3>
            <p>El primer paso es editar o completar los datos de inflación en la tabla inferior. Los datos han de corresponderse con los de la variación anual del IPC para la Comunidad de Madrid, índice general (que podemos encontrar <a href="http://www.ine.es/jaxiT3/Tabla.htm?t=22350&L=0" target="_blank">aquí</a>).</p>
            <p>Las tasas de inflación se refieren a la variación interanual en el mes de diciembre. Esta variación es calculada por el INE y es la que debe figurar en la tabla. La tasa del año en curso debe consignarse con valor cero.</p>
            <p>La aplicación calcula internamente un índice de inflación a partir de estas tasas, tal que:
              <ul style="list-style: none">
                <li>Indice Año Actual = 100</li>
                <li>Indice Año N-1 = Indice Año N / (1+Inflación Año N)</li>
              </ul>
            </p>
            <div id="handsontable-container"></div>
          </div>
        </div>

        <div class="panel">
          <div class="panel-content">
            <h3>2. Guardar datos</h3>
            <p>Una vez editados, al pulsar el botón 'Guardar', los datos se actualizarán en el repositorio de GitHub, listos para el siguiente paso.</p>
            <form class="form-inline" id="data-save" action="" method="get">
              <button type="submit" class="btn btn-default btn-primary" >{{ _('Guardar') }}</button>
            </form>
            <div id="data-save-output" class="data-output">
              <div class="loading"><img src="{% static 'assets/loader.png' %}"> Guardando datos</div>
              <div class="output"></div>
            </div>
          </div>
        </div>

        <div class="panel">
          <div class="panel-content">
            <h3>3. Cargar datos</h3>
            <p>Finalmente, podemos cargar en el servidor los datos existente en el repositorio de GitHub, haciéndolos visibles al exterior, tanto en español como en inglés. El proceso de carga tarda solamente unos instantes.</p>
            <form class="form-inline" id="data-load">
              <button type="submit" class="btn btn-default btn-primary">{{ _('Cargar') }}</button>
            </form>
            <div id="data-load-output" class="data-output">
              <div class="loading"><img src="{% static 'assets/loader.png' %}"> Cargando datos</div>
              <div class="output"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}

{% block extra_javascript %}
<script src="{% static 'javascripts/admin/csv_edit.js' %}"></script>
<script src="{% static 'javascripts/admin/inflation.js' %}"></script>
{% endblock %}
